import{y as n,ag as E,j as u,ah as N,ad as M,ae as P,I as z}from"./index-BUqIVJH9.js";import{r as I}from"./vendor-react-C12YrPp7.js";import L from"./kanban-column-DS4Zerjt.js";import{T as p,a as R,D as y}from"./kanban-task-B1dFhbnw.js";import{I as U,g as B}from"./vendor-antd-3B35lyCA.js";import"./vendor-ui-D5V7SM0_.js";import"./vendor-utils-DcpWhr7h.js";import"./task-detail-BMvboIHF.js";const f=t=>{const a=[];for(let l=0;l<t;l+=1)a.push({username:n.person.fullName(),avatar:n.image.avatarGitHub(),content:n.lorem.lines({min:1,max:3}),time:n.date.past()});return a},O=t=>{const a=[];for(let l=0;l<t;l+=1)a.push(n.image.urlPicsumPhotos());return a},g=t=>{const a=[];for(let l=0;l<t;l+=1)a.push(n.image.avatarGitHub());return a},h=t=>{const a=[],l=new Set;for(;a.length<t;){const k=n.helpers.enumValue(R);l.has(k)||(a.push(k),l.add(k))}return a},F={tasks:{"task-1":{id:"task-1",title:n.lorem.words(3),reporter:n.image.avatarGitHub(),priority:p.LOW,tags:[],comments:[],attachments:[]},"task-2":{id:"task-2",title:n.lorem.words(3),reporter:n.image.avatarGitHub(),assignee:g(1),date:n.date.future(),priority:p.HIGH,tags:h(3),comments:f(1),attachments:O(4)},"task-3":{id:"task-3",title:n.lorem.words(4),reporter:n.image.avatarGitHub(),assignee:g(2),priority:p.MEDIUM,date:n.date.future(),tags:h(2),comments:f(2),attachments:[]},"task-4":{id:"task-4",title:n.lorem.words(5),reporter:n.image.avatarGitHub(),assignee:g(3),priority:p.MEDIUM,tags:h(3),date:n.date.future(),description:n.lorem.lines(5),attachments:[],comments:f(3)},"task-5":{id:"task-5",title:n.lorem.words(4),reporter:n.image.avatarGitHub(),priority:p.HIGH,assignee:g(4),tags:h(4),date:n.date.future(),description:n.lorem.lines(3),attachments:[],comments:f(4)},"task-6":{id:"task-6",title:n.lorem.words(5),reporter:n.image.avatarGitHub(),priority:p.LOW,assignee:g(5),tags:h(5),date:n.date.future(),description:n.lorem.lines(4),attachments:O(5),comments:f(4)}},columns:{"column-1":{id:"column-1",title:"To do",taskIds:["task-1","task-2","task-3"]},"column-2":{id:"column-2",title:"In progress",taskIds:["task-4","task-5"]},"column-3":{id:"column-3",title:"Done",taskIds:["task-6"]}},columnOrder:["column-1","column-2","column-3"]};function _(){const[t,a]=I.useState(F),l=s=>{const{source:e,destination:r,draggableId:i}=s,c=t.columns[e.droppableId],m=t.columns[r.droppableId];if(c===m){const o=Array.from(c.taskIds);o.splice(e.index,1),o.splice(r.index,0,i);const d={...c,taskIds:o},w={...t,columns:{...t.columns,[d.id]:d}};a(w)}else{const o=Array.from(c.taskIds);o.splice(e.index,1);const d={...c,taskIds:o},w=Array.from(m.taskIds);w.splice(r.index,0,i);const C={...m,taskIds:w},G={...t,columns:{...t.columns,[d.id]:d,[C.id]:C}};a(G)}},k=s=>{const{source:e,destination:r,draggableId:i}=s,c=Array.from(t.columnOrder);c.splice(e.index,1),c.splice(r.index,0,i);const m={...t,columnOrder:c};a(m)},j=s=>{const{source:e,destination:r,type:i}=s;r&&(r.droppableId===e.droppableId&&r.index===e.index||(i===y.COLUMN?k(s):l(s)))},[S,b]=I.useState(!1),x=I.useRef(null);E("click",s=>{if(x.current&&!x.current.input?.contains(s.target)){const e=x.current.input?.value;e&&T({id:n.string.uuid(),title:e,taskIds:[]}),b(!1)}});const T=s=>{const e={...t,columns:{...t.columns,[s.id]:s},columnOrder:[...t.columnOrder,s.id]};a(e)},v=(s,e)=>{const r=t.columns[s],i={...t,tasks:{...t.tasks,[e.id]:e},columns:{...t.columns,[s]:{...r,taskIds:[...r.taskIds,e.id]}}};a(i)},D=s=>{const e=t.columns[s],r=Object.keys(t.tasks).filter(o=>!e.taskIds.includes(o)).reduce((o,d)=>(o[d]=t.tasks[d],o),{}),i=Object.keys(t.columns).filter(o=>o!==s).reduce((o,d)=>(o[d]=t.columns[d],o),{}),c=Array.from(t.columnOrder).filter(o=>o!==s);a({tasks:r,columns:i,columnOrder:c})},H=s=>{const e=t.columns[s],r=Object.keys(t.tasks).filter(m=>!e.taskIds.includes(m)).reduce((m,o)=>(m[o]=t.tasks[o],m),{}),i={...t.columns,[s]:{...e,taskIds:[]}},c={...t,tasks:r,columns:i};a(c)},A=s=>{const{id:e,title:r}=s,i={...t.columns,[e]:{...t.columns[e],title:r}},c={...t,columns:i};a(c)};return u.jsx(N,{children:u.jsxs("div",{className:"flex",children:[u.jsx(M,{onDragEnd:j,children:u.jsx(P,{droppableId:"all-columns",direction:"horizontal",type:y.COLUMN,children:s=>u.jsxs("div",{ref:s.innerRef,...s.droppableProps,className:"flex h-full items-start gap-6 p-1",children:[t.columnOrder.map((e,r)=>{const i=t.columns[e],c=i.taskIds.map(m=>t.tasks[m]);return u.jsx(L,{index:r,column:i,tasks:c,createTask:v,clearColumn:H,deleteColumn:D,renameColumn:A},e)}),s.placeholder]})})}),u.jsx("div",{className:"ml-[1.6rem] mt-[0.25rem] min-w-[280px]",children:S?u.jsx(U,{ref:x,size:"large",placeholder:"Column Name",autoFocus:!0}):u.jsxs(B,{onClick:s=>{s.stopPropagation(),b(!0)},className:"!inline-flex !w-full items-center justify-center !text-xs !font-semibold",block:!0,size:"large",children:[u.jsx(z,{icon:"carbon:add",size:20}),u.jsx("div",{children:"Add Column"})]})})]})})}export{_ as default};
