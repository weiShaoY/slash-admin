import{f as w,T as v,ab as O,j as e,aa as S,I as n,a9 as z,s as o}from"./index-RG2TiXrq.js";import{r}from"./vendor-react-C12YrPp7.js";import{D as E,K,T as A}from"./kanban-task-27kJlMbx.js";import{I as m,D as M,g as x}from"./vendor-antd-3B35lyCA.js";import"./vendor-ui-D5V7SM0_.js";import"./vendor-utils-DcpWhr7h.js";import"./task-detail-D6HpW_WJ.js";function Q({index:f,column:t,tasks:g,createTask:h,clearColumn:b,deleteColumn:j,renameColumn:k}){const{themeMode:y}=w(),T={height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:y===v.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)"},C=[{key:"1",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{d(!0)},children:[e.jsx(n,{icon:"solar:pen-bold"}),e.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>b(t.id),children:[e.jsx(n,{icon:"solar:eraser-bold"}),e.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:e.jsxs("div",{className:"flex items-center text-warning",onClick:()=>j(t.id),children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),e.jsx("span",{className:"ml-2",children:"delete"})]})}],[N,c]=r.useState(!1),i=r.useRef(null);O("click",a=>{if(i.current&&!i.current.input?.contains(a.target)){const s=i.current.input?.value;s&&h(t.id,{id:o.string.uuid(),title:s,reporter:o.image.avatarGitHub(),priority:o.helpers.enumValue(A)}),c(!1)}if(l.current&&!l.current.input?.contains(a.target)){const s=l.current.input?.value;s&&k({...t,title:s}),d(!1)}});const[I,d]=r.useState(!1),l=r.useRef(null),[R,p]=r.useState(!1),D=a=>{p(!1),a.domEvent.stopPropagation()};return e.jsx(S,{draggableId:t.id,index:f,children:a=>e.jsx("div",{ref:a.innerRef,...a.draggableProps,children:e.jsxs("div",{style:T,children:[e.jsxs("header",{...a.dragHandleProps,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[I?e.jsx(m,{ref:l,size:"large",autoFocus:!0}):t.title,e.jsx(M,{open:R,onOpenChange:s=>p(s),menu:{items:C,onClick:D},placement:"bottomRight",trigger:["click"],children:e.jsx(x,{shape:"circle",type:"text",className:"!text-gray",children:e.jsx(n,{icon:"dashicons:ellipsis"})})})]}),e.jsx(z,{droppableId:t.id,type:E.TASK,children:s=>e.jsxs("main",{ref:s.innerRef,...s.droppableProps,className:"min-h-[10px]",children:[g.map((u,P)=>e.jsx(K,{task:u,index:P},u.id)),s.placeholder]})}),e.jsx("footer",{className:"w-[248px]",children:N?e.jsx(m,{ref:i,size:"large",placeholder:"Task Name",autoFocus:!0}):e.jsxs(x,{onClick:s=>{s.stopPropagation(),c(!0)},className:"!flex items-center justify-center !text-xs !font-medium",type:"text",block:!0,size:"large",children:[e.jsx(n,{icon:"carbon:add",size:20}),e.jsx("span",{children:"Add Task"})]})})]})})})}export{Q as default};
