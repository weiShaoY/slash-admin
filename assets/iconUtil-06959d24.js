import{aT as e,bC as t,as as n,au as o,b1 as r,aG as a,bn as i,r as d,A as s,y as l,X as c,ar as p,a9 as u,ce as f,ab as h,cf as v,aa as g,Y as y,at as k,b0 as m,Z as b,bm as K,Q as N,aB as x,ch as E,am as C,U as S,bh as w,V as D,a_ as O,ap as P}from"./index-64433d30.js";import{L}from"./List-02d545f7.js";import{g as T}from"./index-cf2dbb6b.js";function M(e,t){return e[t]}var I=["children"];function $(e,t){return"".concat(e,"-").concat(t)}function A(e,t){return null!=e?e:t}function R(e){var t=e||{},n=t.title||"title";return{title:n,_title:t._title||[n],key:t.key||"key",children:t.children||"children"}}function H(r){return function r(a){return e(a).map((function(e){if(!function(e){return e&&e.type&&e.type.isTreeNode}(e))return t(!e,"Tree/TreeNode can only accept TreeNode as children."),null;var a=e.key,i=e.props,d=i.children,s=n(i,I),l=o({key:a},s),c=r(d);return c.length&&(l.children=c),l})).filter((function(e){return e}))}(r)}function B(e,t,n){var o=R(n),i=o._title,d=o.key,s=o.children,l=new Set(!0===t?[]:t),c=[];return function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.map((function(p,u){for(var f,h=$(o?o.pos:"0",u),v=A(p[d],h),g=0;g<i.length;g+=1){var y=i[g];if(void 0!==p[y]){f=p[y];break}}var k=Object.assign(r(p,[].concat(a(i),[d,s])),{title:f,key:v,parent:o,pos:h,children:null,data:p,isStart:[].concat(a(o?o.isStart:[]),[0===u]),isEnd:[].concat(a(o?o.isEnd:[]),[u===n.length-1])});return c.push(k),!0===t||l.has(v)?k.children=e(p[s]||[],k):k.children=[],k}))}(e),c}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,o=t.processEntity,r=t.onProcessFinished,d=t.externalGetKey,s=t.childrenPropName,l=t.fieldNames,c=d||(arguments.length>2?arguments[2]:void 0),p={},u={},f={posEntities:p,keyEntities:u};return n&&(f=n(f)||f),function(e,t,n){var o,r=("object"===i(n)?n:{externalGetKey:n})||{},d=r.childrenPropName,s=r.externalGetKey,l=R(r.fieldNames),c=l.key,p=l.children,u=d||p;s?"string"==typeof s?o=function(e){return e[s]}:"function"==typeof s&&(o=function(e){return s(e)}):o=function(e,t){return A(e[c],t)},function n(r,i,d,s){var l=r?r[u]:e,c=r?$(d.pos,i):"0",p=r?[].concat(a(s),[r]):[];if(r){var f=o(r,c),h={node:r,index:i,pos:c,key:f,parentPos:d.node?d.pos:null,level:d.level+1,nodes:p};t(h)}l&&l.forEach((function(e,t){n(e,t,{node:r,pos:c,level:d?d.level+1:-1},p)}))}(null)}(e,(function(e){var t=e.node,n=e.index,r=e.pos,a=e.key,i=e.parentPos,d=e.level,s={node:t,nodes:e.nodes,index:n,key:a,pos:r,level:d},l=A(a,r);p[r]=s,u[l]=s,s.parent=p[i],s.parent&&(s.parent.children=s.parent.children||[],s.parent.children.push(s)),o&&o(s,f)}),{externalGetKey:c,childrenPropName:s,fieldNames:l}),r&&r(f),f}function q(e,t){var n=t.expandedKeys,o=t.selectedKeys,r=t.loadedKeys,a=t.loadingKeys,i=t.checkedKeys,d=t.halfCheckedKeys,s=t.dragOverNodeKey,l=t.dropPosition,c=M(t.keyEntities,e);return{eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==o.indexOf(e),loaded:-1!==r.indexOf(e),loading:-1!==a.indexOf(e),checked:-1!==i.indexOf(e),halfChecked:-1!==d.indexOf(e),pos:String(c?c.pos:""),dragOver:s===e&&0===l,dragOverGapTop:s===e&&-1===l,dragOverGapBottom:s===e&&1===l}}function U(e){var n=e.data,r=e.expanded,a=e.selected,i=e.checked,d=e.loaded,s=e.loading,l=e.halfChecked,c=e.dragOver,p=e.dragOverGapTop,u=e.dragOverGapBottom,f=e.pos,h=e.active,v=e.eventKey,g=o(o({},n),{},{expanded:r,selected:a,checked:i,loaded:d,loading:s,halfChecked:l,dragOver:c,dragOverGapTop:p,dragOverGapBottom:u,pos:f,active:h,key:v});return"props"in g||Object.defineProperty(g,"props",{get:function(){return t(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),g}function _(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function G(e){var t=e||{},n=t.disabled,o=t.disableCheckbox,r=t.checkable;return!(!n&&!o)||!1===r}function z(e,n,o,r){var a,i=[];a=r||G;var d,s=new Set(e.filter((function(e){var t=!!M(o,e);return t||i.push(e),t}))),l=new Map,c=0;return Object.keys(o).forEach((function(e){var t=o[e],n=t.level,r=l.get(n);r||(r=new Set,l.set(n,r)),r.add(t),c=Math.max(c,n)})),t(!i.length,"Tree missing follow keys: ".concat(i.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),d=!0===n?function(e,t,n,o){for(var r=new Set(e),a=new Set,i=0;i<=n;i+=1)(t.get(i)||new Set).forEach((function(e){var t=e.key,n=e.node,a=e.children,i=void 0===a?[]:a;r.has(t)&&!o(n)&&i.filter((function(e){return!o(e.node)})).forEach((function(e){r.add(e.key)}))}));for(var d=new Set,s=n;s>=0;s-=1)(t.get(s)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!o(n)&&e.parent&&!d.has(e.parent.key))if(o(e.parent.node))d.add(t.key);else{var i=!0,s=!1;(t.children||[]).filter((function(e){return!o(e.node)})).forEach((function(e){var t=e.key,n=r.has(t);i&&!n&&(i=!1),s||!n&&!a.has(t)||(s=!0)})),i&&r.add(t.key),s&&a.add(t.key),d.add(t.key)}}));return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(_(a,r))}}(s,l,c,a):function(e,t,n,o,r){for(var a=new Set(e),i=new Set(t),d=0;d<=o;d+=1)(n.get(d)||new Set).forEach((function(e){var t=e.key,n=e.node,o=e.children,d=void 0===o?[]:o;a.has(t)||i.has(t)||r(n)||d.filter((function(e){return!r(e.node)})).forEach((function(e){a.delete(e.key)}))}));i=new Set;for(var s=new Set,l=o;l>=0;l-=1)(n.get(l)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!r(n)&&e.parent&&!s.has(e.parent.key))if(r(e.parent.node))s.add(t.key);else{var o=!0,d=!1;(t.children||[]).filter((function(e){return!r(e.node)})).forEach((function(e){var t=e.key,n=a.has(t);o&&!n&&(o=!1),d||!n&&!i.has(t)||(d=!0)})),o||a.delete(t.key),d&&i.add(t.key),s.add(t.key)}}));return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(_(i,a))}}(s,n.halfCheckedKeys,l,c,a),d}const V={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};var F=function(e,t){return d.createElement(s,l({},e,{ref:t,icon:V}))};
/**![caret-down](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg0MC40IDMwMEgxODMuNmMtMTkuNyAwLTMwLjcgMjAuOC0xOC41IDM1bDMyOC40IDM4MC44YzkuNCAxMC45IDI3LjUgMTAuOSAzNyAwTDg1OC45IDMzNWMxMi4yLTE0LjIgMS4yLTM1LTE4LjUtMzV6IiAvPjwvc3ZnPg==) */const W=d.forwardRef(F);const X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};var Y=function(e,t){return d.createElement(s,l({},e,{ref:t,icon:X}))};
/**![file](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg1NC42IDI4OC42TDYzOS40IDczLjRjLTYtNi0xNC4xLTkuNC0yMi42LTkuNEgxOTJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjgzMmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2NDBjMTcuNyAwIDMyLTE0LjMgMzItMzJWMzExLjNjMC04LjUtMy40LTE2LjctOS40LTIyLjd6TTc5MC4yIDMyNkg2MDJWMTM3LjhMNzkwLjIgMzI2em0xLjggNTYySDIzMlYxMzZoMzAydjIxNmE0MiA0MiAwIDAwNDIgNDJoMjE2djQ5NHoiIC8+PC9zdmc+) */const Q=d.forwardRef(Y);const Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};var J=function(e,t){return d.createElement(s,l({},e,{ref:t,icon:Z}))};
/**![minus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMzY4YzQuNCAwIDgtMy42IDgtOHYtNDhjMC00LjQtMy42LTgtOC04SDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */const ee=d.forwardRef(J);const te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};var ne=function(e,t){return d.createElement(s,l({},e,{ref:t,icon:te}))};
/**![plus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMTUydjE1MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjU0NGgxNTJjNC40IDAgOC0zLjYgOC04di00OGMwLTQuNC0zLjYtOC04LThINTQ0VjMyOGMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh2MTUySDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */const oe=d.forwardRef(ne);var re=d.createContext(null),ae=function(e){for(var t=e.prefixCls,n=e.level,o=e.isStart,r=e.isEnd,a="".concat(t,"-indent-unit"),i=[],s=0;s<n;s+=1)i.push(d.createElement("span",{key:s,className:c(a,p(p({},"".concat(a,"-start"),o[s]),"".concat(a,"-end"),r[s]))}));return d.createElement("span",{"aria-hidden":"true",className:"".concat(t,"-indent")},i)};const ie=d.memo(ae);var de=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],se="open",le="close",ce=function(e){u(r,e);var t=f(r);function r(){var e;h(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),p(v(e),"state",{dragNodeHighlight:!1}),p(v(e),"selectHandle",void 0),p(v(e),"cacheIndent",void 0),p(v(e),"onSelectorClick",(function(t){(0,e.props.context.onNodeClick)(t,U(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)})),p(v(e),"onSelectorDoubleClick",(function(t){(0,e.props.context.onNodeDoubleClick)(t,U(e.props))})),p(v(e),"onSelect",(function(t){e.isDisabled()||(0,e.props.context.onNodeSelect)(t,U(e.props))})),p(v(e),"onCheck",(function(t){if(!e.isDisabled()){var n=e.props,o=n.disableCheckbox,r=n.checked,a=e.props.context.onNodeCheck;if(e.isCheckable()&&!o){var i=!r;a(t,U(e.props),i)}}})),p(v(e),"onMouseEnter",(function(t){(0,e.props.context.onNodeMouseEnter)(t,U(e.props))})),p(v(e),"onMouseLeave",(function(t){(0,e.props.context.onNodeMouseLeave)(t,U(e.props))})),p(v(e),"onContextMenu",(function(t){(0,e.props.context.onNodeContextMenu)(t,U(e.props))})),p(v(e),"onDragStart",(function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,v(e));try{t.dataTransfer.setData("text/plain","")}catch(o){}})),p(v(e),"onDragEnter",(function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,v(e))})),p(v(e),"onDragOver",(function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,v(e))})),p(v(e),"onDragLeave",(function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,v(e))})),p(v(e),"onDragEnd",(function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,v(e))})),p(v(e),"onDrop",(function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,v(e))})),p(v(e),"onExpand",(function(t){var n=e.props,o=n.loading,r=n.context.onNodeExpand;o||r(t,U(e.props))})),p(v(e),"setSelectHandle",(function(t){e.selectHandle=t})),p(v(e),"getNodeState",(function(){var t=e.props.expanded;return e.isLeaf()?null:t?se:le})),p(v(e),"hasChildren",(function(){var t=e.props.eventKey;return!!((M(e.props.context.keyEntities,t)||{}).children||[]).length})),p(v(e),"isLeaf",(function(){var t=e.props,n=t.isLeaf,o=t.loaded,r=e.props.context.loadData,a=e.hasChildren();return!1!==n&&(n||!r&&!a||r&&o&&!a)})),p(v(e),"isDisabled",(function(){var t=e.props.disabled;return!(!e.props.context.disabled&&!t)})),p(v(e),"isCheckable",(function(){var t=e.props.checkable,n=e.props.context.checkable;return!(!n||!1===t)&&n})),p(v(e),"syncLoadData",(function(t){var n=t.expanded,o=t.loading,r=t.loaded,a=e.props.context,i=a.loadData,d=a.onNodeLoad;o||i&&n&&!e.isLeaf()&&!r&&d(U(e.props))})),p(v(e),"isDraggable",(function(){var t=e.props,n=t.data,o=t.context.draggable;return!(!o||o.nodeDraggable&&!o.nodeDraggable(n))})),p(v(e),"renderDragHandler",(function(){var t=e.props.context,n=t.draggable,o=t.prefixCls;return null!=n&&n.icon?d.createElement("span",{className:"".concat(o,"-draggable-icon")},n.icon):null})),p(v(e),"renderSwitcherIconDom",(function(t){var n=e.props.switcherIcon,r=e.props.context.switcherIcon,a=n||r;return"function"==typeof a?a(o(o({},e.props),{},{isLeaf:t})):a})),p(v(e),"renderSwitcher",(function(){var t=e.props.expanded,n=e.props.context.prefixCls;if(e.isLeaf()){var o=e.renderSwitcherIconDom(!0);return!1!==o?d.createElement("span",{className:c("".concat(n,"-switcher"),"".concat(n,"-switcher-noop"))},o):null}var r=c("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(t?se:le)),a=e.renderSwitcherIconDom(!1);return!1!==a?d.createElement("span",{onClick:e.onExpand,className:r},a):null})),p(v(e),"renderCheckbox",(function(){var t=e.props,n=t.checked,o=t.halfChecked,r=t.disableCheckbox,a=e.props.context.prefixCls,i=e.isDisabled(),s=e.isCheckable();if(!s)return null;var l="boolean"!=typeof s?s:null;return d.createElement("span",{className:c("".concat(a,"-checkbox"),n&&"".concat(a,"-checkbox-checked"),!n&&o&&"".concat(a,"-checkbox-indeterminate"),(i||r)&&"".concat(a,"-checkbox-disabled")),onClick:e.onCheck},l)})),p(v(e),"renderIcon",(function(){var t=e.props.loading,n=e.props.context.prefixCls;return d.createElement("span",{className:c("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(n,"-icon_loading"))})})),p(v(e),"renderSelector",(function(){var t,n,o=e.state.dragNodeHighlight,r=e.props,a=r.title,i=void 0===a?"---":a,s=r.selected,l=r.icon,p=r.loading,u=r.data,f=e.props.context,h=f.prefixCls,v=f.showIcon,g=f.icon,y=f.loadData,k=f.titleRender,m=e.isDisabled(),b="".concat(h,"-node-content-wrapper");if(v){var K=l||g;t=K?d.createElement("span",{className:c("".concat(h,"-iconEle"),"".concat(h,"-icon__customize"))},"function"==typeof K?K(e.props):K):e.renderIcon()}else y&&p&&(t=e.renderIcon());n="function"==typeof i?i(u):k?k(u):i;var N=d.createElement("span",{className:"".concat(h,"-title")},n);return d.createElement("span",{ref:e.setSelectHandle,title:"string"==typeof i?i:"",className:c("".concat(b),"".concat(b,"-").concat(e.getNodeState()||"normal"),!m&&(s||o)&&"".concat(h,"-node-selected")),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick},t,N,e.renderDropIndicator())})),p(v(e),"renderDropIndicator",(function(){var t=e.props,n=t.disabled,o=t.eventKey,r=e.props.context,a=r.draggable,i=r.dropLevelOffset,d=r.dropPosition,s=r.prefixCls,l=r.indent,c=r.dropIndicatorRender,p=r.dragOverNodeKey,u=r.direction,f=!n&&!!a&&p===o,h=null!=l?l:e.cacheIndent;return e.cacheIndent=l,f?c({dropPosition:d,dropLevelOffset:i,indent:h,prefixCls:s,direction:u}):null})),e}return g(r,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"==typeof e?e:t}},{key:"render",value:function(){var e,t=this.props,o=t.eventKey,r=t.className,a=t.style,i=t.dragOver,s=t.dragOverGapTop,u=t.dragOverGapBottom,f=t.isLeaf,h=t.isStart,v=t.isEnd,g=t.expanded,k=t.selected,m=t.checked,b=t.halfChecked,K=t.loading,N=t.domRef,x=t.active;t.data;var E=t.onMouseMove,C=t.selectable,S=n(t,de),w=this.props.context,D=w.prefixCls,O=w.filterTreeNode,P=w.keyEntities,L=w.dropContainerKey,T=w.dropTargetKey,I=w.draggingNodeKey,$=this.isDisabled(),A=y(S,{aria:!0,data:!0}),R=(M(P,o)||{}).level,H=v[v.length-1],B=this.isDraggable(),j=!$&&B,q=I===o,_=void 0!==C?{"aria-selected":!!C}:void 0;return d.createElement("div",l({ref:N,className:c(r,"".concat(D,"-treenode"),(e={},p(p(p(p(p(p(p(p(p(p(e,"".concat(D,"-treenode-disabled"),$),"".concat(D,"-treenode-switcher-").concat(g?"open":"close"),!f),"".concat(D,"-treenode-checkbox-checked"),m),"".concat(D,"-treenode-checkbox-indeterminate"),b),"".concat(D,"-treenode-selected"),k),"".concat(D,"-treenode-loading"),K),"".concat(D,"-treenode-active"),x),"".concat(D,"-treenode-leaf-last"),H),"".concat(D,"-treenode-draggable"),B),"dragging",q),p(p(p(p(p(p(e,"drop-target",T===o),"drop-container",L===o),"drag-over",!$&&i),"drag-over-gap-top",!$&&s),"drag-over-gap-bottom",!$&&u),"filter-node",O&&O(U(this.props))))),style:a,draggable:j,"aria-grabbed":q,onDragStart:j?this.onDragStart:void 0,onDragEnter:B?this.onDragEnter:void 0,onDragOver:B?this.onDragOver:void 0,onDragLeave:B?this.onDragLeave:void 0,onDrop:B?this.onDrop:void 0,onDragEnd:B?this.onDragEnd:void 0,onMouseMove:E},_,A),d.createElement(ie,{prefixCls:D,level:R,isStart:h,isEnd:v}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),r}(d.Component),pe=function(e){return d.createElement(re.Consumer,null,(function(t){return d.createElement(ce,l({},e,{context:t}))}))};function ue(e,t){if(!e)return[];var n=e.slice(),o=n.indexOf(t);return o>=0&&n.splice(o,1),n}function fe(e,t){var n=(e||[]).slice();return-1===n.indexOf(t)&&n.push(t),n}function he(e){return e.split("-")}function ve(e,t){var n=[];return function e(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var o=t.key,r=t.children;n.push(o),e(r)}))}(M(t,e).children),n}function ge(e){if(e.parent){var t=he(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function ye(e,t,n,o,r,a,i,d,s,l){var c,p=e.clientX,u=e.clientY,f=e.target.getBoundingClientRect(),h=f.top,v=f.height,g=(("rtl"===l?-1:1)*(((null==r?void 0:r.x)||0)-p)-12)/o,y=s.filter((function(e){var t;return null===(t=d[e])||void 0===t||null===(t=t.children)||void 0===t?void 0:t.length})),k=M(d,n.props.eventKey);if(u<h+v/2){var m=i.findIndex((function(e){return e.key===k.key})),b=i[m<=0?0:m-1].key;k=M(d,b)}var K=k.key,N=k,x=k.key,E=0,C=0;if(!y.includes(K))for(var S=0;S<g&&ge(k);S+=1)k=k.parent,C+=1;var w,D=t.props.data,O=k.node,P=!0;return w=he(k.pos),0===Number(w[w.length-1])&&0===k.level&&u<h+v/2&&a({dragNode:D,dropNode:O,dropPosition:-1})&&k.key===n.props.eventKey?E=-1:(N.children||[]).length&&y.includes(x)?a({dragNode:D,dropNode:O,dropPosition:0})?E=0:P=!1:0===C?g>-1.5?a({dragNode:D,dropNode:O,dropPosition:1})?E=1:P=!1:a({dragNode:D,dropNode:O,dropPosition:0})?E=0:a({dragNode:D,dropNode:O,dropPosition:1})?E=1:P=!1:a({dragNode:D,dropNode:O,dropPosition:1})?E=1:P=!1,{dropPosition:E,dropLevelOffset:C,dropTargetKey:k.key,dropTargetPos:k.pos,dragOverNodeKey:x,dropContainerKey:0===E?null:(null===(c=k.parent)||void 0===c?void 0:c.key)||null,dropAllowed:P}}function ke(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e}function me(e){if(!e)return null;var n;if(Array.isArray(e))n={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==i(e))return t(!1,"`checkedKeys` is not an array or an object"),null;n={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return n}function be(e,t){var n=new Set;function o(e){if(!n.has(e)){var r=M(t,e);if(r){n.add(e);var a=r.parent;r.node.disabled||a&&o(a.key)}}}return(e||[]).forEach((function(e){o(e)})),a(n)}function Ke(e){if(null==e)throw new TypeError("Cannot destructure "+e)}pe.displayName="TreeNode",pe.isTreeNode=1;var Ne=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],xe=function(e,t){var o=e.className,r=e.style,a=e.motion,i=e.motionNodes,s=e.motionType,p=e.onMotionStart,u=e.onMotionEnd,f=e.active,h=e.treeNodeRequiredProps,v=n(e,Ne),g=d.useState(!0),y=k(g,2),K=y[0],N=y[1],x=d.useContext(re).prefixCls,E=i&&"hide"!==s;m((function(){i&&E!==K&&N(E)}),[i]);var C=d.useRef(!1),S=function(){i&&!C.current&&(C.current=!0,u())};!function(e,t){var n=d.useState(!1),o=k(n,2),r=o[0],a=o[1];m((function(){if(r)return e(),function(){t()}}),[r]),m((function(){return a(!0),function(){a(!1)}}),[])}((function(){i&&p()}),S);return i?d.createElement(b,l({ref:t,visible:K},a,{motionAppear:"show"===s,onVisibleChanged:function(e){E===e&&S()}}),(function(e,t){var n=e.className,o=e.style;return d.createElement("div",{ref:t,className:c("".concat(x,"-treenode-motion"),n),style:o},i.map((function(e){var t=Object.assign({},(Ke(e.data),e.data)),n=e.title,o=e.key,r=e.isStart,a=e.isEnd;delete t.children;var i=q(o,h);return d.createElement(pe,l({},t,i,{title:n,active:f,data:e.data,key:o,isStart:r,isEnd:a}))})))})):d.createElement(pe,l({domRef:t,className:o,style:r},v,{active:f}))};xe.displayName="MotionTreeNode";var Ee=d.forwardRef(xe);function Ce(e,t,n){var o=e.findIndex((function(e){return e.key===n})),r=e[o+1],a=t.findIndex((function(e){return e.key===n}));if(r){var i=t.findIndex((function(e){return e.key===r.key}));return t.slice(a+1,i)}return t.slice(a+1)}var Se=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],we={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},De=function(){},Oe="RC_TREE_MOTION_".concat(Math.random()),Pe={key:Oe},Le={key:Oe,level:0,index:0,pos:"0",node:Pe,nodes:[Pe]},Te={parent:null,children:[],pos:Le.pos,data:Pe,title:null,key:Oe,isStart:[],isEnd:[]};function Me(e,t,n,o){return!1!==t&&n?e.slice(0,Math.ceil(n/o)+1):e}function Ie(e){return A(e.key,e.pos)}var $e=d.forwardRef((function(e,t){var o=e.prefixCls,r=e.data;e.selectable,e.checkable;var a=e.expandedKeys,i=e.selectedKeys,s=e.checkedKeys,c=e.loadedKeys,p=e.loadingKeys,u=e.halfCheckedKeys,f=e.keyEntities,h=e.disabled,v=e.dragging,g=e.dragOverNodeKey,y=e.dropPosition,b=e.motion,K=e.height,N=e.itemHeight,x=e.virtual,E=e.focusable,C=e.activeItem,S=e.focused,w=e.tabIndex,D=e.onKeyDown,O=e.onFocus,P=e.onBlur,T=e.onActiveChange,M=e.onListChangeStart,I=e.onListChangeEnd,$=n(e,Se),R=d.useRef(null),H=d.useRef(null);d.useImperativeHandle(t,(function(){return{scrollTo:function(e){R.current.scrollTo(e)},getIndentWidth:function(){return H.current.offsetWidth}}}));var B=d.useState(a),j=k(B,2),U=j[0],_=j[1],G=d.useState(r),z=k(G,2),V=z[0],F=z[1],W=d.useState(r),X=k(W,2),Y=X[0],Q=X[1],Z=d.useState([]),J=k(Z,2),ee=J[0],te=J[1],ne=d.useState(null),oe=k(ne,2),re=oe[0],ae=oe[1],ie=d.useRef(r);function de(){var e=ie.current;F(e),Q(e),te([]),ae(null),I()}ie.current=r,m((function(){_(a);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,o=t.length;if(1!==Math.abs(n-o))return{add:!1,key:null};function r(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var o=t.filter((function(e){return!n.has(e)}));return 1===o.length?o[0]:null}return n<o?{add:!0,key:r(e,t)}:{add:!1,key:r(t,e)}}(U,a);if(null!==e.key)if(e.add){var t=V.findIndex((function(t){return t.key===e.key})),n=Me(Ce(V,r,e.key),x,K,N),o=V.slice();o.splice(t+1,0,Te),Q(o),te(n),ae("show")}else{var i=r.findIndex((function(t){return t.key===e.key})),d=Me(Ce(r,V,e.key),x,K,N),s=r.slice();s.splice(i+1,0,Te),Q(s),te(d),ae("hide")}else V!==r&&(F(r),Q(r))}),[a,r]),d.useEffect((function(){v||de()}),[v]);var se=b?Y:r,le={expandedKeys:a,selectedKeys:i,loadedKeys:c,loadingKeys:p,checkedKeys:s,halfCheckedKeys:u,dragOverNodeKey:g,dropPosition:y,keyEntities:f};return d.createElement(d.Fragment,null,S&&C&&d.createElement("span",{style:we,"aria-live":"assertive"},function(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}(C)),d.createElement("div",null,d.createElement("input",{style:we,disabled:!1===E||h,tabIndex:!1!==E?w:null,onKeyDown:D,onFocus:O,onBlur:P,value:"",onChange:De,"aria-label":"for screen reader"})),d.createElement("div",{className:"".concat(o,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},d.createElement("div",{className:"".concat(o,"-indent")},d.createElement("div",{ref:H,className:"".concat(o,"-indent-unit")}))),d.createElement(L,l({},$,{data:se,itemKey:Ie,height:K,fullHeight:!1,virtual:x,itemHeight:N,prefixCls:"".concat(o,"-list"),ref:R,onVisibleChange:function(e){e.every((function(e){return Ie(e)!==Oe}))&&de()}}),(function(e){var t=e.pos,n=Object.assign({},(Ke(e.data),e.data)),o=e.title,r=e.key,a=e.isStart,i=e.isEnd,s=A(r,t);delete n.key,delete n.children;var c=q(s,le);return d.createElement(Ee,l({},n,c,{title:o,active:!!C&&r===C.key,pos:t,data:e.data,isStart:a,isEnd:i,motion:b,motionNodes:r===Oe?ee:null,motionType:re,onMotionStart:M,onMotionEnd:de,treeNodeRequiredProps:le,onMouseMove:function(){T(null)}}))})))}));$e.displayName="NodeList";var Ae=function(e){u(r,e);var n=f(r);function r(){var e;h(this,r);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=n.call.apply(n,[this].concat(s)),p(v(e),"destroyed",!1),p(v(e),"delayedDragEnterLogic",void 0),p(v(e),"loadingRetryTimes",{}),p(v(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:R()}),p(v(e),"dragStartMousePosition",null),p(v(e),"dragNode",void 0),p(v(e),"currentMouseOverDroppableNodeKey",null),p(v(e),"listRef",d.createRef()),p(v(e),"onNodeDragStart",(function(t,n){var o=e.state,r=o.expandedKeys,a=o.keyEntities,i=e.props.onDragStart,d=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var s=ue(r,d);e.setState({draggingNodeKey:d,dragChildrenKeys:ve(d,a),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(s),window.addEventListener("dragend",e.onWindowDragEnd),null==i||i({event:t,node:U(n.props)})})),p(v(e),"onNodeDragEnter",(function(t,n){var o=e.state,r=o.expandedKeys,i=o.keyEntities,d=o.dragChildrenKeys,s=o.flattenNodes,l=o.indent,c=e.props,p=c.onDragEnter,u=c.onExpand,f=c.allowDrop,h=c.direction,g=n.props,y=g.pos,k=g.eventKey,m=v(e).dragNode;if(e.currentMouseOverDroppableNodeKey!==k&&(e.currentMouseOverDroppableNodeKey=k),m){var b=ye(t,m,n,l,e.dragStartMousePosition,f,s,i,r,h),K=b.dropPosition,N=b.dropLevelOffset,x=b.dropTargetKey,E=b.dropContainerKey,C=b.dropTargetPos,S=b.dropAllowed,w=b.dragOverNodeKey;-1===d.indexOf(x)&&S?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),m.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[y]=window.setTimeout((function(){if(null!==e.state.draggingNodeKey){var o=a(r),d=M(i,n.props.eventKey);d&&(d.children||[]).length&&(o=fe(r,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(o),null==u||u(o,{node:U(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),m.props.eventKey!==x||0!==N?(e.setState({dragOverNodeKey:w,dropPosition:K,dropLevelOffset:N,dropTargetKey:x,dropContainerKey:E,dropTargetPos:C,dropAllowed:S}),null==p||p({event:t,node:U(n.props),expandedKeys:r})):e.resetDragState()):e.resetDragState()}else e.resetDragState()})),p(v(e),"onNodeDragOver",(function(t,n){var o=e.state,r=o.dragChildrenKeys,a=o.flattenNodes,i=o.keyEntities,d=o.expandedKeys,s=o.indent,l=e.props,c=l.onDragOver,p=l.allowDrop,u=l.direction,f=v(e).dragNode;if(f){var h=ye(t,f,n,s,e.dragStartMousePosition,p,a,i,d,u),g=h.dropPosition,y=h.dropLevelOffset,k=h.dropTargetKey,m=h.dropContainerKey,b=h.dropAllowed,K=h.dropTargetPos,N=h.dragOverNodeKey;-1===r.indexOf(k)&&b&&(f.props.eventKey===k&&0===y?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.resetDragState():g===e.state.dropPosition&&y===e.state.dropLevelOffset&&k===e.state.dropTargetKey&&m===e.state.dropContainerKey&&K===e.state.dropTargetPos&&b===e.state.dropAllowed&&N===e.state.dragOverNodeKey||e.setState({dropPosition:g,dropLevelOffset:y,dropTargetKey:k,dropContainerKey:m,dropTargetPos:K,dropAllowed:b,dragOverNodeKey:N}),null==c||c({event:t,node:U(n.props)}))}})),p(v(e),"onNodeDragLeave",(function(t,n){e.currentMouseOverDroppableNodeKey!==n.props.eventKey||t.currentTarget.contains(t.relatedTarget)||(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var o=e.props.onDragLeave;null==o||o({event:t,node:U(n.props)})})),p(v(e),"onWindowDragEnd",(function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)})),p(v(e),"onNodeDragEnd",(function(t,n){var o=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),null==o||o({event:t,node:U(n.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)})),p(v(e),"onNodeDrop",(function(n,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=e.state,s=d.dragChildrenKeys,l=d.dropPosition,c=d.dropTargetKey,p=d.dropTargetPos;if(d.dropAllowed){var u=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==c){var f=o(o({},q(c,e.getTreeNodeRequiredProps())),{},{active:(null===(a=e.getActiveItem())||void 0===a?void 0:a.key)===c,data:M(e.state.keyEntities,c).node}),h=-1!==s.indexOf(c);t(!h,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var v=he(p),g={event:n,node:U(f),dragNode:e.dragNode?U(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(s),dropToGap:0!==l,dropPosition:l+Number(v[v.length-1])};i||null==u||u(g),e.dragNode=null}}})),p(v(e),"cleanDragState",(function(){null!==e.state.draggingNodeKey&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null})),p(v(e),"triggerExpandActionExpand",(function(t,n){var r=e.state,a=r.expandedKeys,i=r.flattenNodes,d=n.expanded,s=n.key;if(!(n.isLeaf||t.shiftKey||t.metaKey||t.ctrlKey)){var l=i.filter((function(e){return e.key===s}))[0],c=U(o(o({},q(s,e.getTreeNodeRequiredProps())),{},{data:l.data}));e.setExpandedKeys(d?ue(a,s):fe(a,s)),e.onNodeExpand(t,c)}})),p(v(e),"onNodeClick",(function(t,n){var o=e.props,r=o.onClick;"click"===o.expandAction&&e.triggerExpandActionExpand(t,n),null==r||r(t,n)})),p(v(e),"onNodeDoubleClick",(function(t,n){var o=e.props,r=o.onDoubleClick;"doubleClick"===o.expandAction&&e.triggerExpandActionExpand(t,n),null==r||r(t,n)})),p(v(e),"onNodeSelect",(function(t,n){var o=e.state.selectedKeys,r=e.state,a=r.keyEntities,i=r.fieldNames,d=e.props,s=d.onSelect,l=d.multiple,c=n.selected,p=n[i.key],u=!c,f=(o=u?l?fe(o,p):[p]:ue(o,p)).map((function(e){var t=M(a,e);return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:o}),null==s||s(o,{event:"select",selected:u,node:n,selectedNodes:f,nativeEvent:t.nativeEvent})})),p(v(e),"onNodeCheck",(function(t,n,o){var r,i=e.state,d=i.keyEntities,s=i.checkedKeys,l=i.halfCheckedKeys,c=e.props,p=c.checkStrictly,u=c.onCheck,f=n.key,h={event:"check",node:n,checked:o,nativeEvent:t.nativeEvent};if(p){var v=o?fe(s,f):ue(s,f);r={checked:v,halfChecked:ue(l,f)},h.checkedNodes=v.map((function(e){return M(d,e)})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:v})}else{var g=z([].concat(a(s),[f]),!0,d),y=g.checkedKeys,k=g.halfCheckedKeys;if(!o){var m=new Set(y);m.delete(f);var b=z(Array.from(m),{checked:!1,halfCheckedKeys:k},d);y=b.checkedKeys,k=b.halfCheckedKeys}r=y,h.checkedNodes=[],h.checkedNodesPositions=[],h.halfCheckedKeys=k,y.forEach((function(e){var t=M(d,e);if(t){var n=t.node,o=t.pos;h.checkedNodes.push(n),h.checkedNodesPositions.push({node:n,pos:o})}})),e.setUncontrolledState({checkedKeys:y},!1,{halfCheckedKeys:k})}null==u||u(r,h)})),p(v(e),"onNodeLoad",(function(n){var o,r=n.key,a=M(e.state.keyEntities,r);if(null==a||null===(o=a.children)||void 0===o||!o.length){var i=new Promise((function(o,a){e.setState((function(i){var d=i.loadedKeys,s=void 0===d?[]:d,l=i.loadingKeys,c=void 0===l?[]:l,p=e.props,u=p.loadData,f=p.onLoad;return u&&-1===s.indexOf(r)&&-1===c.indexOf(r)?(u(n).then((function(){var t=fe(e.state.loadedKeys,r);null==f||f(t,{event:"load",node:n}),e.setUncontrolledState({loadedKeys:t}),e.setState((function(e){return{loadingKeys:ue(e.loadingKeys,r)}})),o()})).catch((function(n){if(e.setState((function(e){return{loadingKeys:ue(e.loadingKeys,r)}})),e.loadingRetryTimes[r]=(e.loadingRetryTimes[r]||0)+1,e.loadingRetryTimes[r]>=10){var i=e.state.loadedKeys;t(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:fe(i,r)}),o()}a(n)})),{loadingKeys:fe(c,r)}):null}))}));return i.catch((function(){})),i}})),p(v(e),"onNodeMouseEnter",(function(t,n){var o=e.props.onMouseEnter;null==o||o({event:t,node:n})})),p(v(e),"onNodeMouseLeave",(function(t,n){var o=e.props.onMouseLeave;null==o||o({event:t,node:n})})),p(v(e),"onNodeContextMenu",(function(t,n){var o=e.props.onRightClick;o&&(t.preventDefault(),o({event:t,node:n}))})),p(v(e),"onFocus",(function(){var t=e.props.onFocus;e.setState({focused:!0});for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];null==t||t.apply(void 0,o)})),p(v(e),"onBlur",(function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];null==t||t.apply(void 0,o)})),p(v(e),"getTreeNodeRequiredProps",(function(){var t=e.state;return{expandedKeys:t.expandedKeys||[],selectedKeys:t.selectedKeys||[],loadedKeys:t.loadedKeys||[],loadingKeys:t.loadingKeys||[],checkedKeys:t.checkedKeys||[],halfCheckedKeys:t.halfCheckedKeys||[],dragOverNodeKey:t.dragOverNodeKey,dropPosition:t.dropPosition,keyEntities:t.keyEntities}})),p(v(e),"setExpandedKeys",(function(t){var n=e.state,o=B(n.treeData,t,n.fieldNames);e.setUncontrolledState({expandedKeys:t,flattenNodes:o},!0)})),p(v(e),"onNodeExpand",(function(n,o){var r=e.state.expandedKeys,a=e.state,i=a.listChanging,d=a.fieldNames,s=e.props,l=s.onExpand,c=s.loadData,p=o.expanded,u=o[d.key];if(!i){var f=r.indexOf(u),h=!p;if(t(p&&-1!==f||!p&&-1===f,"Expand state not sync with index check"),r=h?fe(r,u):ue(r,u),e.setExpandedKeys(r),null==l||l(r,{node:o,expanded:h,nativeEvent:n.nativeEvent}),h&&c){var v=e.onNodeLoad(o);v&&v.then((function(){var t=B(e.state.treeData,r,d);e.setUncontrolledState({flattenNodes:t})})).catch((function(){var t=ue(e.state.expandedKeys,u);e.setExpandedKeys(t)}))}}})),p(v(e),"onListChangeStart",(function(){e.setUncontrolledState({listChanging:!0})})),p(v(e),"onListChangeEnd",(function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))})),p(v(e),"onActiveChange",(function(t){var n=e.state.activeKey,o=e.props,r=o.onActiveChange,a=o.itemScrollOffset,i=void 0===a?0:a;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t,offset:i}),null==r||r(t))})),p(v(e),"getActiveItem",(function(){var t=e.state,n=t.activeKey,o=t.flattenNodes;return null===n?null:o.find((function(e){return e.key===n}))||null})),p(v(e),"offsetActiveKey",(function(t){var n=e.state,o=n.flattenNodes,r=n.activeKey,a=o.findIndex((function(e){return e.key===r}));-1===a&&t<0&&(a=o.length);var i=o[a=(a+t+o.length)%o.length];if(i){var d=i.key;e.onActiveChange(d)}else e.onActiveChange(null)})),p(v(e),"onKeyDown",(function(t){var n=e.state,r=n.activeKey,a=n.expandedKeys,i=n.checkedKeys,d=n.fieldNames,s=e.props,l=s.onKeyDown,c=s.checkable,p=s.selectable;switch(t.which){case K.UP:e.offsetActiveKey(-1),t.preventDefault();break;case K.DOWN:e.offsetActiveKey(1),t.preventDefault()}var u=e.getActiveItem();if(u&&u.data){var f=e.getTreeNodeRequiredProps(),h=!1===u.data.isLeaf||!!(u.data[d.children]||[]).length,v=U(o(o({},q(r,f)),{},{data:u.data,active:!0}));switch(t.which){case K.LEFT:h&&a.includes(r)?e.onNodeExpand({},v):u.parent&&e.onActiveChange(u.parent.key),t.preventDefault();break;case K.RIGHT:h&&!a.includes(r)?e.onNodeExpand({},v):u.children&&u.children.length&&e.onActiveChange(u.children[0].key),t.preventDefault();break;case K.ENTER:case K.SPACE:!c||v.disabled||!1===v.checkable||v.disableCheckbox?c||!p||v.disabled||!1===v.selectable||e.onNodeSelect({},v):e.onNodeCheck({},v,!i.includes(r))}}null==l||l(t)})),p(v(e),"setUncontrolledState",(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var a=!1,i=!0,d={};Object.keys(t).forEach((function(n){n in e.props?i=!1:(a=!0,d[n]=t[n])})),!a||n&&!i||e.setState(o(o({},d),r))}})),p(v(e),"scrollTo",(function(t){e.listRef.current.scrollTo(t)})),e}return g(r,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var e=this.props,t=e.activeKey,n=e.itemScrollOffset,o=void 0===n?0:n;void 0!==t&&t!==this.state.activeKey&&(this.setState({activeKey:t}),null!==t&&this.scrollTo({key:t,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var e,t=this.state,n=t.focused,o=t.flattenNodes,r=t.keyEntities,a=t.draggingNodeKey,s=t.activeKey,u=t.dropLevelOffset,f=t.dropContainerKey,h=t.dropTargetKey,v=t.dropPosition,g=t.dragOverNodeKey,k=t.indent,m=this.props,b=m.prefixCls,K=m.className,N=m.style,x=m.showLine,E=m.focusable,C=m.tabIndex,S=void 0===C?0:C,w=m.selectable,D=m.showIcon,O=m.icon,P=m.switcherIcon,L=m.draggable,T=m.checkable,M=m.checkStrictly,I=m.disabled,$=m.motion,A=m.loadData,R=m.filterTreeNode,H=m.height,B=m.itemHeight,j=m.virtual,q=m.titleRender,U=m.dropIndicatorRender,_=m.onContextMenu,G=m.onScroll,z=m.direction,V=m.rootClassName,F=m.rootStyle,W=y(this.props,{aria:!0,data:!0});return L&&(e="object"===i(L)?L:"function"==typeof L?{nodeDraggable:L}:{}),d.createElement(re.Provider,{value:{prefixCls:b,selectable:w,showIcon:D,icon:O,switcherIcon:P,draggable:e,draggingNodeKey:a,checkable:T,checkStrictly:M,disabled:I,keyEntities:r,dropLevelOffset:u,dropContainerKey:f,dropTargetKey:h,dropPosition:v,dragOverNodeKey:g,indent:k,direction:z,dropIndicatorRender:U,loadData:A,filterTreeNode:R,titleRender:q,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},d.createElement("div",{role:"tree",className:c(b,K,V,p(p(p({},"".concat(b,"-show-line"),x),"".concat(b,"-focused"),n),"".concat(b,"-active-focused"),null!==s)),style:F},d.createElement($e,l({ref:this.listRef,prefixCls:b,style:N,data:o,disabled:I,selectable:w,checkable:!!T,motion:$,dragging:null!==a,height:H,itemHeight:B,virtual:j,focusable:E,focused:n,tabIndex:S,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:_,onScroll:G},this.getTreeNodeRequiredProps(),W))))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var r,a=n.prevProps,i={prevProps:e};function d(t){return!a&&t in e||a&&a[t]!==e[t]}var s=n.fieldNames;if(d("fieldNames")&&(s=R(e.fieldNames),i.fieldNames=s),d("treeData")?r=e.treeData:d("children")&&(t(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),r=H(e.children)),r){i.treeData=r;var l=j(r,{fieldNames:s});i.keyEntities=o(p({},Oe,Le),l.keyEntities)}var c,u=i.keyEntities||n.keyEntities;if(d("expandedKeys")||a&&d("autoExpandParent"))i.expandedKeys=e.autoExpandParent||!a&&e.defaultExpandParent?be(e.expandedKeys,u):e.expandedKeys;else if(!a&&e.defaultExpandAll){var f=o({},u);delete f[Oe];var h=[];Object.keys(f).forEach((function(e){var t=f[e];t.children&&t.children.length&&h.push(t.key)})),i.expandedKeys=h}else!a&&e.defaultExpandedKeys&&(i.expandedKeys=e.autoExpandParent||e.defaultExpandParent?be(e.defaultExpandedKeys,u):e.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,r||i.expandedKeys){var v=B(r||n.treeData,i.expandedKeys||n.expandedKeys,s);i.flattenNodes=v}if((e.selectable&&(d("selectedKeys")?i.selectedKeys=ke(e.selectedKeys,e):!a&&e.defaultSelectedKeys&&(i.selectedKeys=ke(e.defaultSelectedKeys,e))),e.checkable)&&(d("checkedKeys")?c=me(e.checkedKeys)||{}:!a&&e.defaultCheckedKeys?c=me(e.defaultCheckedKeys)||{}:r&&(c=me(e.checkedKeys)||{checkedKeys:n.checkedKeys,halfCheckedKeys:n.halfCheckedKeys}),c)){var g=c,y=g.checkedKeys,k=void 0===y?[]:y,m=g.halfCheckedKeys,b=void 0===m?[]:m;if(!e.checkStrictly){var K=z(k,!0,u);k=K.checkedKeys,b=K.halfCheckedKeys}i.checkedKeys=k,i.halfCheckedKeys=b}return d("loadedKeys")&&(i.loadedKeys=e.loadedKeys),i}}]),r}(d.Component);p(Ae,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(e){var t=e.dropPosition,n=e.dropLevelOffset,o=e.indent,r={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:r.top=0,r.left=-n*o;break;case 1:r.bottom=0,r.left=-n*o;break;case 0:r.bottom=0,r.left=o}return d.createElement("div",{style:r})},allowDrop:function(){return!0},expandAction:!1}),p(Ae,"TreeNode",pe);const Re=new E("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),He=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),Be=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${D(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),je=(e,t)=>{const{treeCls:n,treeNodeCls:o,treeNodePadding:r,titleHeight:a,nodeSelectedBg:i,nodeHoverBg:d}=t,s=t.paddingXS;return{[n]:Object.assign(Object.assign({},S(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,[`&${n}-rtl`]:{[`${n}-switcher`]:{"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},w(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${o}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:r,insetInlineStart:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:Re,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[o]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${D(r)} 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${n}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${o}-disabled).filter-node ${n}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${n}-draggable-icon`]:{flexShrink:0,width:a,lineHeight:D(a),textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${t.motionDurationSlow}`,[`${o}:hover &`]:{opacity:.45}},[`&${o}-disabled`]:{[`${n}-draggable-icon`]:{visibility:"hidden"}}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:a}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:Object.assign(Object.assign({},He(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:a,margin:0,lineHeight:D(a),textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:a,height:a,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${n}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(r).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(a).div(2).equal()).mul(.8).equal(),height:t.calc(a).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:s,alignSelf:"flex-start",marginTop:t.marginXXS},[`${n}-node-content-wrapper, ${n}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:a,margin:0,padding:`0 ${D(t.calc(t.paddingXS).div(2).equal())}`,color:"inherit",lineHeight:D(a),background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:d},[`&${n}-node-selected`]:{backgroundColor:i},[`${n}-iconEle`]:{display:"inline-block",width:a,height:a,lineHeight:D(a),textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}-node-content-wrapper`]:Object.assign({lineHeight:D(a),userSelect:"none"},Be(e,t)),[`${o}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${t.colorPrimary}`}},"&-show-line":{[`${n}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(r).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${o}-leaf-last`]:{[`${n}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${D(t.calc(a).div(2).equal())} !important`}}}}})}},qe=e=>{const{treeCls:t,treeNodeCls:n,treeNodePadding:o,directoryNodeSelectedBg:r,directoryNodeSelectedColor:a}=e;return{[`${t}${t}-directory`]:{[n]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:o,insetInlineStart:0,transition:`background-color ${e.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:e.controlItemBgHover}},"> *":{zIndex:1},[`${t}-switcher`]:{transition:`color ${e.motionDurationMid}`},[`${t}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${t}-node-selected`]:{color:a,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:r},[`${t}-switcher`]:{color:a},[`${t}-node-content-wrapper`]:{color:a,background:"transparent"}}}}}},Ue=(e,t)=>{const n=`.${e}`,o=`${n}-treenode`,r=t.calc(t.paddingXS).div(2).equal(),a=C(t,{treeCls:n,treeNodeCls:o,treeNodePadding:r});return[je(e,a),qe(a)]},_e=e=>{const{controlHeightSM:t}=e;return{titleHeight:t,nodeHoverBg:e.controlItemBgHover,nodeSelectedBg:e.controlItemBgActive}},Ge=N("Tree",((e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:T(`${n}-checkbox`,e)},Ue(n,e),x(e)]}),(e=>{const{colorTextLightSolid:t,colorPrimary:n}=e;return Object.assign(Object.assign({},_e(e)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:n})})),ze=e=>{const{prefixCls:t,switcherIcon:n,treeNodeProps:o,showLine:r,switcherLoadingIcon:a}=e,{isLeaf:i,expanded:s,loading:l}=o;if(l)return d.isValidElement(a)?a:d.createElement(O,{className:`${t}-switcher-loading-icon`});let p;if(r&&"object"==typeof r&&(p=r.showLeafIcon),i){if(!r)return null;if("boolean"!=typeof p&&p){const e="function"==typeof p?p(o):p,n=`${t}-switcher-line-custom-icon`;return d.isValidElement(e)?P(e,{className:c(e.props.className||"",n)}):e}return p?d.createElement(Q,{className:`${t}-switcher-line-icon`}):d.createElement("span",{className:`${t}-switcher-leaf-line`})}const u=`${t}-switcher-icon`,f="function"==typeof n?n(o):n;return d.isValidElement(f)?P(f,{className:c(f.props.className||"",u)}):void 0!==f?f:r?s?d.createElement(ee,{className:`${t}-switcher-line-icon`}):d.createElement(oe,{className:`${t}-switcher-line-icon`}):d.createElement(W,{className:u})};export{pe as C,Q as F,ze as S,Ae as T,z as a,ue as b,j as c,fe as d,be as e,R as f,H as g,Ue as h,_e as i,Ge as u};
